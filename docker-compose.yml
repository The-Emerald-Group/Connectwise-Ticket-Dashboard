version: '3.8'

services:
  cw-dashboard:
    build: .
    image: samuelstreets/connectwise-ticket-dashboard:latest
    container_name: connectwise-ticket-dashboard
    ports:
      - "5000:5000"
    environment:
      # ── ConnectWise API credentials ────────────────────────────────────────
      # Site: your ConnectWise instance (e.g. eu.myconnectwise.net)
      - CW_SITE=eu.myconnectwise.net

      # Company ID: the short code used to log in to ConnectWise
      - CW_COMPANY=yourcompanyid

      # API keys: create under System > Members > (member) > API Keys
      - CW_PUBLIC_KEY=your_public_key_here
      - CW_PRIVATE_KEY=your_private_key_here

      # Client ID: register at https://developer.connectwise.com/ClientID
      - CW_CLIENT_ID=your_client_id_here
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:5000/api/config-check')"]
      interval: 30s
      timeout: 10s
      retries: 3
